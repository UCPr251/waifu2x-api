<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Waifu2x Api Log</title>
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <link rel="stylesheet" href="./style.css">
  <!-- <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <!-- <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <link rel="stylesheet" href="/public/fontawesome-free@7.1.0/css/all.min.css">
  <!-- <script src="https://cdn.jsdelivr.net/npm/ansi_up@5.0.1/ansi_up.min.js"></script> -->
  <script src="/public/ansi_up.min.js"></script>

</head>

<body class="bg-log-bg text-log-text font-mono text-sm m-0 p-0 h-screen flex flex-col overflow-hidden">

  <header class="bg-log-header px-4 py-2 flex justify-between items-center shadow-md z-10 select-none">
    <div class="flex items-center font-bold space-x-4">
      <h1 class="text-lg text-log-accent">Waifu2x Api Log</h1>
      <div id="total-count">日志数：0</div>
    </div>

    <div class="hidden 2xl:flex items-center space-x-4">
      <div id="current-time" class="text-gray-300"></div>

      <div class="flex flex-col space-y-1">
        <span class="text-sm">日志类型:</span>
        <div class="flex flex-wrap items-center gap-3" id="log-type-group">
          <label class="flex items-center gap-1 text-xs text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="DEBU" checked>
            <span>DEBU</span>
          </label>
          <label class="flex items-center gap-1 text-xs text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="INFO" checked>
            <span>INFO</span>
          </label>
          <label class="flex items-center gap-1 text-xs text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="MARK" checked>
            <span>MARK</span>
          </label>
          <label class="flex items-center gap-1 text-xs text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="WARN" checked>
            <span>WARN</span>
          </label>
          <label class="flex items-center gap-1 text-xs text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="ERRO" checked>
            <span>ERRO</span>
          </label>
        </div>
      </div>

      <div class="flex items-center space-x-2">
        <label for="retain-count" class="text-sm">日志行数:</label>
        <select id="retain-count"
          class="bg-gray-700 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-log-accent">
          <option value="0">无限</option>
          <option value="100">100</option>
          <option value="200" selected>200</option>
          <option value="400">400</option>
          <option value="600">600</option>
          <option value="800">800</option>
          <option value="1000">1000</option>
          <option value="2000">2000</option>
          <option value="3000">3000</option>
          <option value="4000">4000</option>
          <option value="5000">5000</option>
        </select>
      </div>

      <div class="flex items-center space-x-2">
        <label for="font-size" class="text-sm">字体大小:</label>
        <select id="font-size"
          class="bg-gray-700 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-log-accent">
          <option value="12">12px</option>
          <option value="13">13px</option>
          <option value="14">14px</option>
          <option value="15">15px</option>
          <option value="16" selected>16px</option>
          <option value="17">17px</option>
          <option value="18">18px</option>
          <option value="19">19px</option>
          <option value="20">20px</option>
        </select>
      </div>

      <div class="flex items-center space-x-2">
        <label for="line-height" class="text-sm">行高:</label>
        <select id="line-height"
          class="bg-gray-700 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-log-accent">
          <option value="1.0">1.0</option>
          <option value="1.1">1.1</option>
          <option value="1.2">1.2</option>
          <option value="1.3">1.3</option>
          <option value="1.4" selected>1.4</option>
          <option value="1.5">1.5</option>
          <option value="1.6">1.6</option>
          <option value="1.7">1.7</option>
          <option value="1.8">1.8</option>
          <option value="1.9">1.9</option>
          <option value="2.0">2.0</option>
        </select>
      </div>

      <button id="clear-btn"
        class="flex items-center space-x-1 px-3 py-1 rounded bg-gray-700 hover:bg-red-600 transition-colors">
        <i class="fa fa-trash"></i>
        <span>清空日志</span>
      </button>
    </div>

    <button id="mobile-menu-btn"
      class="flex items-center gap-2 px-3 py-1 rounded border border-gray-700 bg-gray-800/80 hover:bg-gray-700 transition-colors">
      <i class="fa fa-sliders text-base"></i>
      <span class="text-sm inline 2xl:hidden ">设置</span>
    </button>
  </header>

  <div id="mobile-menu"
    class="mobile-menu fixed top-0 right-0 h-full w-64 bg-log-header border-l border-gray-700 z-50 p-4 select-none">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-lg font-bold">操作菜单</h3>
      <button id="close-menu-btn" class="text-gray-300 hover:text-white">
        <i class="fa fa-times text-xl"></i>
      </button>
    </div>

    <div class="space-y-4">

      <div class="flex flex-col space-y-2">
        <span class="text-sm">日志类型：</span>
        <div class="flex flex-wrap gap-3" id="mobile-log-type-group">
          <label class="flex items-center gap-2 text-sm text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="DEBU" checked>
            <span>DEBU</span>
          </label>
          <label class="flex items-center gap-2 text-sm text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="INFO" checked>
            <span>INFO</span>
          </label>
          <label class="flex items-center gap-2 text-sm text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="MARK" checked>
            <span>MARK</span>
          </label>
          <label class="flex items-center gap-2 text-sm text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="WARN" checked>
            <span>WARN</span>
          </label>
          <label class="flex items-center gap-2 text-sm text-gray-200">
            <input type="checkbox" class="h-4 w-4 accent-[#4a90e2]" data-log-type="ERRO" checked>
            <span>ERRO</span>
          </label>
        </div>
      </div>

      <div class="flex flex-col space-y-2">
        <label for="mobile-retain-count" class="text-sm">日志行数：</label>
        <select id="mobile-retain-count"
          class="bg-gray-700 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-log-accent">
          <option value="0">无限</option>
          <option value="100">100</option>
          <option value="200" selected>200</option>
          <option value="400">400</option>
          <option value="600">600</option>
          <option value="800">800</option>
          <option value="1000">1000</option>
          <option value="2000">2000</option>
          <option value="3000">3000</option>
          <option value="4000">4000</option>
          <option value="5000">5000</option>
        </select>
      </div>

      <div class="flex flex-col space-y-2">
        <label for="mobile-font-size" class="text-sm">字体大小：</label>
        <select id="mobile-font-size"
          class="bg-gray-700 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-log-accent">
          <option value="12">12px</option>
          <option value="13">13px</option>
          <option value="14">14px</option>
          <option value="15">15px</option>
          <option value="16" selected>16px</option>
          <option value="17">17px</option>
          <option value="18">18px</option>
          <option value="19">19px</option>
          <option value="20">20px</option>
        </select>
      </div>

      <div class="flex flex-col space-y-2 pb-2">
        <label for="mobile-line-height" class="text-sm">行高：</label>
        <select id="mobile-line-height"
          class="bg-gray-700 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-log-accent">
          <option value="1.0">1.0</option>
          <option value="1.1">1.1</option>
          <option value="1.2">1.2</option>
          <option value="1.3">1.3</option>
          <option value="1.4" selected>1.4</option>
          <option value="1.5">1.5</option>
          <option value="1.6">1.6</option>
          <option value="1.7">1.7</option>
          <option value="1.8">1.8</option>
          <option value="1.9">1.9</option>
          <option value="2.0">2.0</option>
        </select>
      </div>

      <button id="mobile-clear-btn"
        class="flex items-center space-x-1 px-3 py-2 rounded bg-gray-700 hover:bg-red-600 transition-colors w-full justify-center">
        <i class="fa fa-trash"></i>
        <span>清空日志</span>
      </button>

      <div class="border-t border-gray-700 pt-4 space-y-4 text-gray-200">
        <div>
          <p class="text-sm font-semibold mb-1">包含正则筛选</p>
          <p class="text-xs text-gray-400 mb-2">满足任一正则才展示</p>
          <div id="include-regex-list" class="flex flex-wrap gap-2 min-h-[2.5rem] text-xs mb-2"></div>
          <div class="flex flex-col gap-2">
            <input id="include-regex-input" type="text" placeholder="例如: error|fail"
              class="flex-1 bg-gray-800 border border-gray-700 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[#4a90e2]"
              autocomplete="off">
            <button id="add-include-regex" class="px-3 py-1 rounded bg-gray-700 hover:bg-[#4a90e2]/70 transition-colors"
              type="button">添加</button>
          </div>
        </div>

        <div class="pt-2 border-t border-dashed border-gray-700">
          <p class="text-sm font-semibold mb-1">排除正则筛选</p>
          <p class="text-xs text-gray-400 mb-2">命中任一正则则隐藏</p>
          <div id="exclude-regex-list" class="flex flex-wrap gap-2 min-h-[2.5rem] text-xs mb-2"></div>
          <div class="flex flex-col gap-2">
            <input id="exclude-regex-input" type="text" placeholder="例如: heartbeat"
              class="flex-1 bg-gray-800 border border-gray-700 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[#4a90e2]"
              autocomplete="off">
            <button id="add-exclude-regex" class="px-3 py-1 rounded bg-gray-700 hover:bg-[#4a90e2]/70 transition-colors"
              type="button">添加</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <main class="flex-1 overflow-hidden relative">
    <div id="log-container" class="log-container absolute inset-0 overflow-y-auto p-2">
      <div class="text-gray-500 italic log-line text-center py-10">等待接收日志...</div>
    </div>
  </main>

  <div id="scroll-indicator"
    class="scroll-indicator fixed bottom-6 right-6 p-3 rounded hidden flex items-center justify-center">
    <i class="fa fa-angle-double-down text-lg"></i>
  </div>

  <script src="./script.js"></script>
</body>

</html>